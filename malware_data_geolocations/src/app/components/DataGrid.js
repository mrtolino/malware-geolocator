import React from 'react';
import PropTypes from 'prop-types';

const DataGrid = (props) => {
  if (props.loading) {
    return <div id="dataTable" className="row" />;
  }

  return (
    <div id="dataTable" className="row">
      <div className="table-responsive row-margin-top-10">
        <table className="table table-hover">
          <thead className="thead-dark">
            <tr onClick={props.onGridHeaderClick}>
              <th abbr="id" scope="col">ID</th>
              <th abbr="date">Date</th>
              <th abbr="ip">IP</th>
              <th abbr="description">Description</th>
              <th abbr="domain">Domain</th>
              <th abbr="asn">ASN</th>
              <th abbr="registrant">Registrant</th>
              <th abbr="revlookup">Reverse Lookup</th>
              <th abbr="country">Country</th>
            </tr>
          </thead>
          <tbody>
            {
              props.data.map((data, index) => (
                <tr
                  className={data.selected ? 'table-danger' : ''}
                  key={data.info.id}
                  onClick={() => props.onSelectLocation(index)}
                >
                  <th className={props.sortBy === 'id' ? 'table-active' : ''}>{data.info.id}</th>
                  <td className={props.sortBy === 'date' ? 'table-active' : ''}>{data.info.date}</td>
                  <td className={props.sortBy === 'ip' ? 'table-active' : ''}>{data.info.ip}</td>
                  <td className={props.sortBy === 'description' ? 'table-active' : ''}>{data.info.description}</td>
                  <td className={props.sortBy === 'domain' ? 'table-active' : ''}>{data.info.domain}</td>
                  <td className={props.sortBy === 'asn' ? 'table-active' : ''}>{data.info.asn}</td>
                  <td className={props.sortBy === 'registrant' ? 'table-active' : ''}>{data.info.registrant}</td>
                  <td className={props.sortBy === 'reverse_lookup' ? 'table-active' : ''}>{data.info.reverse_lookup}</td>
                  <td className={props.sortBy === 'country' ? 'table-active' : ''}>{data.info.country}</td>
                </tr>
                ))
            }
          </tbody>
        </table>
      </div>
    </div>
  );
};

DataGrid.propTypes = {
  loading: PropTypes.bool.isRequired,
  data: PropTypes.array.isRequired,
  onSelectLocation: PropTypes.func.isRequired,
  sortBy: PropTypes.string.isRequired,
  onGridHeaderClick: PropTypes.func.isRequired,
};

export default DataGrid;
