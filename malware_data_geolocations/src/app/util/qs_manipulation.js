import { parse } from 'qs';

export const getCurrentPage = () => parseInt(parse(window.location.search.replace('?', '')).page, 10);

export const getSearchValue = () => {
  const searchValue = parse(window.location.search.replace('?', '')).search;
  return searchValue || '';
};

export const getSortBy = () => parse(window.location.search.replace('?', '')).sortBy;

export const getOrd = () => parse(window.location.search.replace('?', '')).ord;

export const setCurrentPage = (page) => {
  const searchValue = getSearchValue() || '';
  const sortBy = getSortBy() || 'id';
  const ord = getOrd() || 'asc';

  if (searchValue) {
    window.history.replaceState(null, null, `${window.location.pathname}?page=${page}&sortBy=${sortBy}&ord=${ord}&search=${searchValue}`);
  } else {
    window.history.replaceState(null, null, `${window.location.pathname}?page=${page}&sortBy=${sortBy}&ord=${ord}`);
  }
};

export const setSearchValue = (searchValue) => {
  const page = getCurrentPage() || 1;
  const sortBy = getSortBy() || 'id';
  const ord = getOrd() || 'asc';

  if (searchValue) {
    window.history.replaceState(null, null, `${window.location.pathname}?page=${page}&sortBy=${sortBy}&ord=${ord}&search=${searchValue}`);
  } else {
    window.history.replaceState(null, null, `${window.location.pathname}?page=${page}&sortBy=${sortBy}&ord=${ord}`);
  }
};

export const setSortBy = (sortBy) => {
  const page = getCurrentPage() || 1;
  const searchValue = getSearchValue() || '';

  if (searchValue) {
    window.history.replaceState(null, null, `${window.location.pathname}?page=${page}&sortBy=${sortBy}&ord=asc&search=${searchValue}`);
  } else {
    window.history.replaceState(null, null, `${window.location.pathname}?page=${page}&sortBy=${sortBy}&ord=asc`);
  }
};

export const setOrd = (ord) => {
  const page = getCurrentPage() || 1;
  const sortBy = getSortBy() || 'id';
  const searchValue = getSearchValue() || '';

  if (searchValue) {
    window.history.replaceState(null, null, `${window.location.pathname}?page=${page}&sortBy=${sortBy}&ord=${ord}&search=${searchValue}`);
  } else {
    window.history.replaceState(null, null, `${window.location.pathname}?page=${page}&sortBy=${sortBy}&ord=${ord}`);
  }
};
