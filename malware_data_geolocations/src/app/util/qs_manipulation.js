import { parse } from 'qs';

export const getCurrentPage = () => {
  return parseInt(parse(window.location.search.replace('?', '')).page);
};

export const setCurrentPage = (page) => {
  const searchValue = getSearchValue();
  const sortBy = getSortBy();
  const ord = getOrd();

  if (searchValue) {
    window.history.replaceState(null, null, `${window.location.pathname}?page=${page}&sortBy=${sortBy}&ord=${ord}&search=${searchValue}`);
  } else {
    window.history.replaceState(null, null, `${window.location.pathname}?page=${page}&sortBy=${sortBy}&ord=${ord}`);
  }
};

export const getSearchValue = () => {
  let searchValue = parse(window.location.search.replace('?', '')).search;
  return searchValue ? searchValue : '';
};

export const setSearchValue = (searchValue) => {
  const page = getCurrentPage();
  const sortBy = getSortBy();
  const ord = getOrd();

  if (searchValue) {
    window.history.replaceState(null, null, `${window.location.pathname}?page=${page}&sortBy=${sortBy}&ord=${ord}&search=${searchValue}`);
  } else {
    window.history.replaceState(null, null, `${window.location.pathname}?page=${page}&sortBy=${sortBy}&ord=${ord}`);
  }
};

export const getSortBy = () => {
  return parse(window.location.search.replace('?', '')).sortBy;
};

export const setSortBy = (sortBy) => {
  const page = getCurrentPage();
  const searchValue = getSearchValue();

  if (searchValue) {
    window.history.replaceState(null, null, `${window.location.pathname}?page=${page}&sortBy=${sortBy}&ord=asc&search=${searchValue}`);
  } else {
    window.history.replaceState(null, null, `${window.location.pathname}?page=${page}&sortBy=${sortBy}&ord=asc`);
  }
};

export const getOrd = () => {
  return parse(window.location.search.replace('?', '')).ord;
};

export const setOrd = (ord) => {
  const page = getCurrentPage();
  const sortBy = getSortBy();
  const searchValue = getSearchValue();

  if (searchValue) {
    window.history.replaceState(null, null, `${window.location.pathname}?page=${page}&sortBy=${sortBy}&ord=${ord}&search=${searchValue}`);
  } else {
    window.history.replaceState(null, null, `${window.location.pathname}?page=${page}&sortBy=${sortBy}&ord=${ord}`);
  }
};
